"use strict";let ax=function(t,e){e&&(t instanceof Array||(t=[t]),t={$nodes:t,...e});let r=ax.factory(t);return t.id?document.querySelector("#"+t.id).replaceWith(r):document.body.appendChild(r),r};ax.extension={},ax.type={},ax.tag={},ax["throw"]=function(t){throw new Error(t)},ax.factory=function(t){let e=ax.type.is;return e.node(t)?t:e.array(t)?ax.factory.array(t):e.object(t)?ax.factory.object(t):e["function"](t)?ax.factory["function"](t):ax.factory.text(t)},ax.x=ax.extension,ax.type.is={},ax.factory.text=function(t){return t===undefined?t="":t+=" ",document.createTextNode(t)},ax.factory.object=function(t){return this.object.element(t)},ax.factory.pipeline=[],ax.factory.array=function(t){return this({$tag:"div",$nodes:t})},ax.factory["function"]=function(t){const e=ax.a,r=ax.x;return this(t="class"===(""+t).slice(0,5)?new t(e,r):ax.a.tagProxyFunction+""==t+""?t():t(e,r))},ax.tag.proxy={},ax.type.is.undefined=function(t){return void 0===t},ax.type.is.object=function(t){return"object"==typeof t},ax.type.is.array=function(t){return t instanceof Array},ax.type.is["function"]=function(t){return"function"==typeof t},ax.type.is.node=function(t){return t instanceof Node},ax.type.is.string=function(t){return"string"==typeof t},ax.factory.pipeline.push(function(t){return t}),ax.factory.object.base={$tag:"span"},ax.factory.object.traverse=function(t,e){return t?/^\s*\^/.test(e)?(e=e.replace(/^\s*\^\s*/,""))?t.closest(e):t.parentElement:/^\s*$/.test(e)?t:t.querySelector(e):null},ax.factory.object.query=function(t,e=[]){return new Proxy(function(){},ax.factory.object.query.proxy.shim(t,e))},ax.factory.object.element=function(t){t={...this.base,...t};let e=document.createElement(t.$tag);return e.$object=t,ax.factory.pipeline.forEach(function(t){e.$object=t(e.$object)}),this.element.properties.$init(this.element.properties(e).$render())},ax.tag.proxy.shim={get:(t,e)=>(function(t,r={}){return t=ax.tag.proxy.shim.component(t),r=ax.tag.proxy.shim.attributes(e,r),ax.factory.object({...t,...r})})},ax.tag.proxy["function"]=function(t){let e=document.createElement("div");return e.innerHTML=t,e.firstChild},ax.factory.object.element.properties=function(t){return this.properties.$render(this.properties.events(this.properties.accessors(this.properties.define(t))))},ax.factory.object.element.process=function(t){return ax.factory.pipeline.forEach(function(e){t.$object=e(t.$object)}),this.process.properties(t)},ax.factory.object.query.proxy={},ax.factory.object.base.$$=function(t){return ax.factory.object.query(Array.from(this.querySelectorAll(t)))},ax.factory.object.base.$=function(...t){let e=this;return t.forEach(function(t){ax.type.is.array(t)?e=e.$(...t):/^\^\S*$/.test(t)?e=ax.factory.object.traverse(e,t):/\^/.test(t)?(t=t.split(/(\^\S*)/g),e=e.$(...t)):e=ax.factory.object.traverse(e,t)}),e},ax.tag.proxy.shim.component=function(t){let e=ax.type.is;return e.node(t)?{$nodes:[t]}:e.array(t)?{$nodes:t}:e.object(t)?t:e["function"](t)?{$nodes:[t]}:e.undefined(t)?{}:{$text:t}},ax.tag.proxy.shim.attributes=function(t,e){let r=(t.match(/^([\w|-]+)/)||[])[1],o=(t.match(/#([\w|-]+)/)||[])[1],n=(t.match(/\.([\.|\w|-]+)/)||[])[1];return r&&(e.$tag=r),o&&(e.id=o),n&&(e["class"]=n.replace(/\./g," ")),e},ax.a=new Proxy(ax.tag.proxy["function"],ax.tag.proxy.shim),ax.factory.object.element.properties.accessors=function(t){return this.accessors.$nodes(this.accessors.$html(this.accessors.$text(this.accessors.$on(this.accessors.$state(t)))))},ax.factory.object.element.properties.$init=function(t){return t.$object.hasOwnProperty("$init")&&t.appendChild(ax.factory({$tag:"script",type:"text/javascript",$html:"(function(){let script=document.currentScript;let element=script.parentElement;script.remove();element.$init();})()"})),t},ax.factory.object.element.properties.events=function(t){return this.events.$on(this.events.$off(t))},ax.factory.object.element.properties.define=function(t){for(let e in t.$object)if(t.$object.hasOwnProperty(e))if(/[a-zA-Z]/.test(e[0])){let r=t.$object[e];if(r||""===r){ax.type.is.object(r)&&(r=this.define.attribute(r));let o=document.createAttribute(e);o.value=r,t.setAttributeNode(o)}}else"$text"!=e&&"$nodes"!=e&&"$html"!=e&&"$state"!=e&&"$on"!=e&&(t[e]=t.$object[e]);return t},ax.factory.object.element.properties.$render=function(t){let e=this.$render;return t.$render=function(){return t.$object.hasOwnProperty("$text")?e.text(t):t.$object.hasOwnProperty("$html")?e.html(t):t.$object.hasOwnProperty("$nodes")?e.nodes(t):t},t},ax.factory.object.query.proxy.shim=function(t,e){return{get:ax.factory.object.query.proxy.shim.get(t,e),set:ax.factory.object.query.proxy.shim.set(t,e),apply:ax.factory.object.query.proxy.shim.apply(t,e)}},ax.factory.object.element.properties.$render.text=function(t){let e=t.$text;if(ax.type.is["function"](e)){let r=[t];t.$state&&r.push(t.$state),e=e.call(t,t.$state,t)}for(;t.childNodes.length;)t.removeChild(t.lastChild);return t.appendChild(document.createTextNode(e)),t},ax.factory.object.element.properties.$render.html=function(t){let e=t.$html;return ax.type.is["function"](e)&&(e=e.call(t,t.$state,t)),t.innerHTML=e,t},ax.factory.object.element.properties.$render.nodes=function(t){let e=t.$nodes;for(ax.type.is["function"](e)&&(e=e.call(t,t.$state,t));t.firstChild;)t.firstChild.remove();return ax.type.is.array(e)?e.map(function(e){t.appendChild(ax.factory(e))}):t.appendChild(ax.factory(e)),t},ax.factory.object.element.properties.accessors.$on=function(t){return Object.defineProperty(t,"$on",{get:function(){return t.$object.$on},set:function(e){for(let r in e)t.$off(r),t.$object.$on[r]=e[r],t.addEventListener(r.split(":")[0],t.$object.$on[r])}}),t},ax.factory.object.element.properties.accessors.$nodes=function(t){return Object.defineProperty(t,"$nodes",{get:function(){return t.$object.$nodes||[]},set:function(e){delete t.$object.$text,delete t.$object.$html,t.$object.$nodes=e,t.$render()}}),t},ax.factory.object.element.properties.accessors.$state=function(t){return Object.defineProperty(t,"$state",{get:function(){return t.$object.$state},set:function(e){t.$object.$state=e,t.$object.$update?t.$object.$update.bind(t).call(t.$object.$state)&&t.$render():t.$render()}}),t},ax.factory.object.element.properties.accessors.$html=function(t){return Object.defineProperty(t,"$html",{get:function(){return t.$object.$html},set:function(e){delete t.$object.$text,delete t.$object.$nodes,t.$object.$html=e,t.$render()}}),t},ax.factory.object.element.properties.accessors.$text=function(t){return Object.defineProperty(t,"$text",{get:function(){return t.$object.$text},set:function(e){delete t.$object.$html,delete t.$object.$nodes,t.$object.$text=e,t.$render()}}),t},ax.factory.object.element.properties.events.$on=function(t){if(t.$object.hasOwnProperty("$on"))for(let e in t.$object.$on)t.addEventListener(e.split(":")[0],t.$object.$on[e]);return t},ax.factory.object.element.properties.events.$off=function(t){return t.$off=function(e){t.removeEventListener(e.split(":")[0],t.$object.$on[e])},t},ax.factory.object.element.properties.define.attribute=function(t){var e="";return Object.keys(t).forEach(function(r){if(!ax.type.is.object(t[r])){let o=(r[0].match(/[A-Z]/)?"-":"")+r.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase();e+=o+": "+t[r]+"; "}}),e},ax.factory.object.query.proxy.shim.get=function(t,e){return function(r,o){return/^\d+$/.test(o)?t[o]:(t.forEach(function(r,n){let c=r[o];ax.type.is["function"](c)?e[n]=c:t[n]=c}),ax.factory.object.query(t,e))}},ax.factory.object.query.proxy.shim.set=function(t){return function(e,r,o){t.forEach(function(t){t[r]=o})}},ax.factory.object.query.proxy.shim.apply=function(t,e){return function(r,o,n){return e.length?(t.forEach(function(r,o){t[o]=e[o].call(r,...n)}),ax.factory.object.query(t)):t}};