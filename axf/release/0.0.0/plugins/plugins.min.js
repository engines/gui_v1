"use strict";ax.extension.appkit={},ax.extension.appkit.controller=function(e,t={}){return ax.a["appkit-controller"]({id:t.id,$init:ax.x.appkit.controller.$init(t),$to:ax.x.appkit.controller.$to(t),$open:ax.x.appkit.controller.$open(t),$update:ax.x.appkit.controller.$update(t),$content:ax.x.appkit.controller.$content(e,t),$nodes:ax.x.appkit.controller.$nodes(t),...t.controllerTag})},ax.extension.appkit.transition={},ax.extension.appkit.put=function(e,t={}){return ax.a.pre(JSON.stringify(e,null,t.indent||2))},ax.extension.appkit.widget={},ax.extension.appkit.report=function(e,t={}){if(ax.type.is["function"](e)){let a=t.scope||[];ax.type.is.string(a)&&(a=[a]),e=e(ax.extension.appkit.report.factory({scope:a,data:t.data,layout:t.layout}))}return ax.a["appkit-report"](e,t.reportTag)},ax.extension.appkit.fetch=function(e,t={}){let a=ax.a,i=ax.x,n=t.method||"GET",o=t.success||function(e){ax.type.is.object(e)?this.$nodes=i.appkit.put(e):this.$text=e},r=t.error||function(e,t){t.$text=e.failed||"Failed to load"},l=function(t){let a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState){let e;200==this.status?(e="application/json"===this.getResponseHeader("Content-Type")?JSON.parse(this.responseText):this.responseText,t.$success(e,this)):(e=this.statusText||"Request error",t.$error(e,this))}},a.open(n,e,!0),a.setRequestHeader("Accept","application/json"),a.send()},s=Object.assign({$init:function(){l(this)},$success:function(e,t){o.call(this,e,this,t)},$error:function(e,t){r.call(this,e,this,t)}},t.fetchTag),p=a.loading(t.loading||"Loading");return a["appkit-fetch"](p,s)},ax.extension.appkit.window={},ax.extension.appkit.lib={},ax.extension.appkit.form=function(e,t={}){if(ax.type.is["function"](e)){let a=t.scope||[];ax.type.is.string(a)&&(a=[a]),e=e(ax.extension.appkit.form.factory({scope:a,data:t.data,layout:t.layout}))}let a={action:t.action,method:t.method||"POST",$init:function(){this.$focus()},$focus:function(){let e;for(let t of this.$$("input,select,textarea")())if(ax.x.appkit.lib.element.visible(t)){e=t;break}e&&e.focus()},$dependencies:function(){this.$$("appkit-form-field-dependent").$process()},$data:function(){return ax.extension.appkit.lib.form.data.object(this)},$serialize:function(){return JSON.stringify(this.$data())},...t.formTag};return ax.a.form(e,a)},ax.extension.appkit.router=function(e={}){return e.root=e.root||"/",e.home=e.home||"/",ax.a["appkit-router"]({id:e.id,$init:ax.x.appkit.router.$init(e),$update:ax.x.appkit.router.$update(),$open:ax.x.appkit.router.$open(e),$to:ax.x.appkit.router.$to(e),$bind:ax.x.appkit.router.$bind(),$controllers:[],...e.routerTag})},ax.extension.appkit.icon=function(e,t,a={}){var i=[ax.a.span({"class":e})];return t&&(a.compact||i.push(" "),i.push(ax.a.span(t))),a.reverse&&i.reverse(),ax.a["appkit-icon"](i,a.tag)},ax.extension.appkit.table=function(e,t={}){let a,i=[],n=function(e,a){return ax.type.is["function"](t.trTag)?t.trTag(e,a):t.trTag},o=function(e,a,i){return ax.type.is["function"](t.thTag)?t.thTag(e,a,i):t.thTag},r=function(e,a,i){return ax.type.is["function"](t.tdTag)?t.tdTag(e,a,i):t.tdTag};a=!1===t.headers?{rows:[],cols:[]}:!0!==t.headers&&t.headers?{rows:t.headers.rows||[],cols:t.headers.cols||[]}:{rows:[0],cols:[]};let l=function(e,t,i){if(a.rows.includes(e)){let a={scope:"col",...o(e,t,i)};return ax.a.th(i,a)}if(a.cols.includes(t)){let a={scope:"row",...o(e,t,i)};return ax.a.th(i,a)}return ax.a.td(i,r(e,t,i))};return e.map(function(e,t){i.push(ax.a.tr(e.map(function(e,a){return l(t,a,e)}),n(t,e)))}),ax.a.table(i,t.tableTag)},ax.extension.appkit.document={},ax.extension.appkit.button=function(e,t,a={}){var i={type:"button",$on:{click:t},...a.buttonTag};return a.icon&&(e=this.appkit.icon(a.icon,e,a.icon)),ax.a.button(e,i)},ax.extension.appkit.router.$to=function(e){return function(t,a){if(a){var i=ax.x.appkit.lib.objectToQueryString(a);t.includes("?")?t+="&"+i:t+="?"+i}if("window"===e.bind||e.bind===window){let a=e.root+t;history.pushState({urlPath:a},"",a);var n=new PopStateEvent("popstate",{urlPath:a});dispatchEvent(n)}else this.$open(t)}},ax.extension.appkit.router.$update=function(){return function(){this.$controllers.forEach(function(e){e.$open(this.$state.path,this.$state.params)}.bind(this))}},ax.extension.appkit.router.$init=function(e){return function(){"window"!==e.bind&&e.bind!==window||window.addEventListener("popstate",function(){this.$open()}.bind(this)),this.$open()}},ax.extension.appkit.router.$bind=function(){return function(e){return this.$controllers.push(e),e.$open(this.$state.path,this.$state.params),this}},ax.extension.appkit.router.$open=function(e){return function(t){ax.type.is.undefined(t)&&(t=(t=window.location.pathname.replace(e.root,""))||e.home,t+=window.location.search),this.$state=ax.x.appkit.lib.url.extractParamsFromPath(t)}},ax.extension.appkit.form.proxy={},ax.extension.appkit.form.factory=function(e){return new Proxy(ax.extension.appkit.form.proxy.object(e),ax.extension.appkit.form.proxy.shim)},ax.extension.appkit.report.item=function(e,t={}){if(ax.type.is["function"](e)){let a=t.scope||[];ax.type.is.string(a)&&(a=[a]),e=e(ax.extension.appkit.report.factory({scope:a,data:t.data,layout:t.layout}))}return ax.a["appkit-report-item"](e,t.itemTag)},ax.extension.appkit.report.item.index=function(e,t={}){let a=t.before;t.after;ax.type.is["function"](a)&&(a=a({data:data}))},ax.extension.appkit.report.proxy={},ax.extension.appkit.report.factory=function(e){return new Proxy(ax.extension.appkit.report.proxy.object(e),ax.extension.appkit.report.proxy.shim)},ax.extension.appkit.document.stylesheet={},ax.extension.appkit.document.focus={},ax.extension.appkit.document.insert=function(e,t,a,i={}){let n=i.method||"appendChild";var o=document.createElement(t);Object.assign(o,i.tag);var r=document.querySelector(e);o.innerHTML=a,r[n](o)},ax.extension.appkit.document.script=function(e){ax.document.insert("head","script",e)},ax.extension.appkit.transition.fade=function(e,t={}){let a=ax.a,i=ax.x,n=(t.time||500)/2;return a["appkit-transition"](e,{$init:function(){this.style.display="none"},$in:function(){this.$nodes=[this.$view],i.appkit.lib.animate.fade["in"](this,{time:n,complete:t.complete})},$to:function(e){this.$view=e,this.$nodes.length?i.appkit.lib.animate.fade.out(this,{time:n,complete:this.$in.bind(this)}):this.$in()}})},ax.extension.appkit.transition.popfade=function(e,t={}){let a=ax.a,i=ax.x,n=t.time||500;return a["appkit-transition"](e,{$complete:function(){this.$nodes=this.$nodes.slice(1)},$to:function(e){this.$nodes.length?(this.$nodes[0].style.position="absolute",i.appkit.lib.animate.fadeOut(this.$nodes[0],{time:n,complete:this.$complete.bind(this)}),this.$nodes=this.$nodes.concat([e])):this.$nodes=[e]}})},ax.extension.appkit.controller.$to=function(e){return function(t,a){if(e.bind)this.$router.$to(t,a);else{var i=ax.x.appkit.lib.extractParamsFromPath(t);a={...i.params,...a},this.$open(i.path,a)}}},ax.extension.appkit.controller.$update=function(e){return function(){e.transition?this.children[0].$to(this.$content()):this.$nodes=[this.$content()]}},ax.extension.appkit.controller.$nodes=function(e){if(e.transition){let t=e.transition;return ax.type.is.string(t)&&(t=ax.x.appkit.transition[t]),[t()]}return[]},ax.extension.appkit.controller.$init=function(e){return function(){e.bind?this.$router=document.querySelector(e.bind).$bind(this):this.$open(e.root||"/")}},ax.extension.appkit.controller.$open=function(){return function(e,t){this.$state={path:e,params:t}}},ax.extension.appkit.controller.$content=function(e,t){var a=ax.x.appkit.controller.$content.views(e,t);return function(){let e,i=this.$state.path,n=this.$state.params||{};for(let t in a){var o=a[t],r=new RegExp(o[0]),l=i.match(r);if(l){var s=o[1];e=o[2],s.forEach(function(e,t){n[e]=l[t+1]});break}}e===undefined?e=t["default"]===undefined?`Not found: ${i}`:t["default"]:ax.type.is["function"](e)&&(e=e(n,this));let p=t.viewTag;return ax.type.is["function"](p)&&(p=p(i,n)),ax.a["appkit-controller-view"](e,p)}},ax.extension.appkit.widget.clock=function(e={}){const t=ax.a;let a=Object.assign({$init:function(){this.$tock(),setInterval(this.$tock.bind(this),1e3)},$tock:function(){this.$text=(new Date).toLocaleString()}},e.timeTag);return t["appkit-widget-time"](a)},ax.extension.appkit.window.open=function(e,t={}){var a,i,n;ax.type.is.string(e)?a=e:(a=(t=e).url,i=t.html),i?((n=window.open("",t.target,t.window)).document.write(i),n.document.close()):n=window.open(a,t.target||a,t.window)},ax.extension.appkit.lib.url={},ax.extension.appkit.lib.field={},ax.extension.appkit.lib.text={},ax.extension.appkit.lib.uuid={},ax.extension.appkit.lib.object={},ax.extension.appkit.lib.style=function(e,t){return ax.type.is.string(e)?e:this.style.rules(e,t?[t]:[])},ax.extension.appkit.lib.form={},ax.extension.appkit.lib.element={},ax.extension.appkit.lib.animate={},ax.extension.appkit.lib.array={},ax.extension.appkit.lib.tabable=function(e){if(e.tabIndex>=0&&ax.x.appkit.lib.element.visible(e)){let t=e.$("^appkit-form-field appkit-form-field-dependent");return!t||t.$match()}return!1},ax.extension.appkit.lib.date={},ax.extension.appkit.form.proxy.object=function(e){return{$scope:()=>e.scope,$data:()=>e.data,$layout:()=>e.layout,...ax.extension.appkit.form.factory}},ax.extension.appkit.form.proxy.shim={get:(e,t,a)=>{if(ax.type.is["function"](e[t]))return e[t](a);ax["throw"](`The appkit form factory does not have method: .${t}()`)}},ax.extension.appkit.report.proxy.object=function(e){return{$scope:()=>e.scope,$data:()=>e.data,$layout:()=>e.layout,...ax.extension.appkit.report.factory}},ax.extension.appkit.report.proxy.shim={get:(e,t,a)=>{if(ax.type.is["function"](e[t]))return e[t](a);ax["throw"](`The appkit report factory does not have method: .${t}()`)}},ax.extension.appkit.document.stylesheet.proxy={},ax.extension.appkit.controller.$content.views=function(e){var t=[];return Object.keys(e).forEach(function(a){var i=a.match(/(:\w+|\*\w+)/g)||[],n=a,o=[];i.forEach(function(e){o.push(e.slice(1));var t=":"===e.charAt(0)?"(\\w+)":"(.+$)";n=n.replace(e,t)}),n="^"+n.replace(/\//g,"\\/")+"$",content=e[a],t.push([n,o,content])}),t},ax.extension.appkit.lib.field.name={},ax.extension.appkit.lib.field.previous=function(e){let t=e.$("^form"),a=Array.from(t.querySelectorAll("appkit-form-field, appkit-form-submit"));e=e.$("^appkit-form-field");let i=a.indexOf(e),n=a.length;return 0==i||n<2?e:a[i-1]},ax.extension.appkit.lib.field.collection={},ax.extension.appkit.lib.field.next=function(e){let t=e.$("^form"),a=Array.from(t.querySelectorAll("appkit-form-field, appkit-form-submit"));e=e.$("^appkit-form-field");let i=a.indexOf(e),n=a.length;return i==n-1||n<2?e:a[i+1]},ax.extension.appkit.lib.style.rules=function(e,t){let a=this;var i="";return ax.type.is.object(e)&&(i+=a.rules.rule(e,t),Object.keys(e).forEach(function(n){var o=e[n];n.split(",").forEach(function(e){e=e.trim(),i+=a.rules(o,t.concat(e))})})),i},ax.extension.appkit.lib.element.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ax.extension.appkit.lib.form.data={},ax.extension.appkit.lib.date.now={},ax.extension.appkit.lib.text.humanize=function(e=""){return e.toString().replace(/_/g," ")},ax.extension.appkit.lib.text.labelize=function(e=""){return this.capitalize(e.toString().replace(/_/g," "))},ax.extension.appkit.lib.text.capitalize=function(e=""){return e.toString().charAt(0).toUpperCase()+e.slice(1)},ax.extension.appkit.lib.url.extractParamsFromPath=function(e){var t={};e=e.split("?"),t.path=e[0];var a=e[1];return t.params=a?this.queryStringToObject(a):{},t},ax.extension.appkit.lib.url.objectToQueryString=function(e,t){var a,i=[];for(a in e)if(e.hasOwnProperty(a)){var n=t?t+"["+a+"]":a,o=e[a];i.push(null!==o&&ax.type.is.object(o)?this.objectToQueryString(o,n):encodeURIComponent(n)+"="+encodeURIComponent(o))}return i.join("&")},ax.extension.appkit.lib.url.queryStringToObject=function(e){var t={};return e.split("&").map(function(e){e=e.split("="),t[e[0]]=decodeURIComponent(e[1])}),t},ax.extension.appkit.lib.uuid.generate=function(){return"00000000-0000-4000-0000-000000000000".replace(/0/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))},ax.extension.appkit.lib.animate.fade={},ax.extension.appkit.lib.object.dig=function(e,t){let a=e;for(let e in t){if(null==a)return null;a=a[t[e]]||null}return a},ax.extension.appkit.lib.object.assign=function(e,t,a){let i=t[0],n=t.length;if(1===n)""===i?e.push(a):e[i]=a;else{let o=t[1];if(""===i){let t=e.length-1,a=e[t];i=ax.type.is.object(a)&&(n>2||ax.type.is.undefined(a[o]))?t:t+1}ax.type.is.undefined(e[i])&&(e[i]=""===o?[]:{}),this.assign(e[i],t.slice(1),a)}},ax.extension.appkit.lib.tabable.previous=function(e){let t,a,i=Array.from(document.querySelectorAll("*")),n=i.indexOf(e),o=i.length,r=n;do{if(0===--r&&(r=o-1),r===n)return e;a=this(t=i[r])}while(!a);return t},ax.extension.appkit.lib.tabable.next=function(e){let t=Array.from(document.querySelectorAll("*"));e=e.$$("*")().slice(-1)[0]||e;let a,i,n=t.indexOf(e),o=t.length,r=n;do{if(++r===o&&(r=0),r===n)return e;i=this(a=t[r])}while(!i);return a},ax.extension.appkit.form.factory.submit=(()=>(function(e={}){let t=ax.a,a={$nodes:[e.icon?ax.a.icon(e.icon,{text:e.text}):e.text||"Submit"],type:"submit",...e.buttonTag};return t["appkit-form-submit"](t.button(a),{$focus:function(){this.focus()},...e.submitTag})})),ax.extension.appkit.form.factory.one=(e=>(function(t,a,i={}){let n=ax.a;return ax.type.is["function"](a)&&(a=a(ax.extension.appkit.form.factory({data:i.data||e.$data[t],scope:i.scope||e.$scope.concat([t]),layout:i.layout||e.$layout}))),n["appkit-form-field-one"](a)})),ax.extension.appkit.form.factory.many=(e=>(function(t,a,i={}){let n=ax.a;if(ax.type.is["function"](a)){let n=i.data||e.$data[i.key||t]||[],o=i.scope||e.$scope.concat([t,""]),r=i.layout||e.$layout,l=ax.extension.appkit.form.factory({data:n,scope:o,layout:r});l.items=(e=>ax.extension.appkit.form.factory.many.items(e)),l.add=(e=>ax.extension.appkit.form.factory.many.add(e)),a=a(l)}return n["appkit-form-field-many"](a)})),ax.extension.appkit.form.factory.field=(e=>(function(t={},a={}){ax.type.is.string(t)?a.key=t:a=t;let i=ax.a,n=ax.x,o=n.appkit.form.factory.field,r=n.appkit.lib.field;a.name=a.name||r.name.assemble(...e.$scope,a.key);let l=i["appkit-form-field-body"]([o.caption(a),o.help(a.help),o.input(e)(a),o.hint(a.hint)],a.bodyTag);return!1!==a.dependent&&(l=o.dependent(e)(l,a.dependent)),i["appkit-form-field"](l,{name:a.name,$match:function(){let e=this.$("appkit-form-field-dependent");return!e||e.$match()},$value:function(){return this.$("appkit-form-field-input > *").$value()},$focus:function(){this.$("appkit-form-field-input > *").$focus()},...a.fieldTag})})),ax.extension.appkit.form.factory.fields=(e=>(function(...t){return{$tag:"fields",$nodes:t.map(function(t){return e.field(t)})}})),ax.extension.appkit.form.factory.checkboxes=(e=>(function(t={}){let a=ax.a,i=(ax.x,ax.x.appkit.lib.field),n=i.collection.name(t.name),o=i.collection.value(t.value),r=i.collection.from(t.collection).map(function(a,r){let l=t.check;return ax.type.is["function"](l)&&(l=l(a,r)),e.check({name:n,value:i.collection.includes(o,a.value)?a.value:"",disabled:a.disabled,checked:a.value,label:a.label,...l})});r.unshift(e.input({name:n,type:"hidden",disabled:!0,inputTag:{$value:function(){return this.$("^appkit-form-checkboxes").$value()}}}));let l={$value:function(){return this.$$("input:checked").value()},$focus:function(){this.$("input").focus()},$disable:function(){this.querySelectorAll("input").forEach(function(e){e.$disable()})},$enable:function(){t.disabled||this.querySelectorAll("input").forEach(function(e){e.$enable()})},...t.checkboxesTag};return a["appkit-form-checkboxes"](r,l)})),ax.extension.appkit.form.factory.textarea=(()=>(function(e={}){return ax.a.textarea(e.value,{name:e.name,disabled:e.disabled,placeholder:e.placeholder,readonly:e.readonly,required:e.required,$value:function(){return this.value},$focus:function(){this.focus()},$disable:function(){this.disabled="disabled"},$enable:function(){e.disabled||this.removeAttribute("disabled")},...e.textareaTag})})),ax.extension.appkit.form.factory.check=(()=>(function(e={}){let t=e.checked||"on",a=ax.a.input({name:e.name,value:t,checked:e.value==t,"class":e["class"],data:e.data,disabled:e.disabled,id:e.id,readonly:e.readonly,required:e.required,style:e.style,title:e.title,type:e.type||"checkbox",$value:function(){return this.checked?this.value:""},$focus:function(){this.focus()},$disable:function(){this.disabled="disabled"},$enable:function(){e.disabled||this.removeAttribute("disabled")},...e.inputTag});if(e.label){let t={$disable:function(){this.$("input").$disable()},$enable:function(){this.$("input").$enable()},$value:function(){return this.$("input").$value()},$focus:function(){this.$("input").$focus()},...e.labelTag},i=[a,e.label];return e.reverse&&i.reverse(),ax.a.label(i,t)}return a})),ax.extension.appkit.form.factory.input=(()=>(function(e={}){let t=e.name;return e.multiple&&(t=lib.field.collection.name(t)),ax.a.input({name:t,value:e.value,autocomplete:e.autocomplete,"class":e["class"],data:e.data,disabled:e.disabled,id:e.id,multiple:e.multiple,placeholder:e.placeholder,readonly:e.readonly,required:e.required,style:e.style,title:e.title,type:e.type,$init:function(){this.$valid()},$on:{"input: check field depenencies":function(){let e=this.$("^form");e&&e.$dependencies()},"input: check validity":function(){this.$valid()}},$value:function(){return this.value},$focus:function(){this.focus()},$disable:function(){this.disabled="disabled"},$enable:function(){e.disabled||this.removeAttribute("disabled")},$valid:function(){if(this.setCustomValidity(""),this.validity.valid)return!0;if(e.invalid)if(ax.type.is["function"](e.invalid)){let t=e.invalid(this.value,this.validity);t&&this.setCustomValidity(t)}else this.setCustomValidity(e.invalid);return!1},...e.inputTag})})),ax.extension.appkit.form.factory.radios=(e=>(function(t={}){let a=ax.a,i=(ax.x,ax.x.appkit.lib.field.collection.from(t.collection).map(function(a,i){let n=t.check;return ax.type.is["function"](n)&&(n=n(checkbox,i)),e.check({name:t.name,type:"radio",value:t.value===a.value?a.value:"",checked:a.value,label:a.label,inputTag:{$value:function(){return this.$("^appkit-form-radios").$value()}},...n})})),n={$value:function(){let e=this.$("input:checked");return e?e.value:""},$focus:function(){this.$("input").focus()},$disable:function(){this.querySelectorAll("input").forEach(function(e){e.$disable()})},$enable:function(){t.disabled||this.querySelectorAll("input").forEach(function(e){e.$enable()})},...t.radiosTag};return a["appkit-form-radios"](i,n)})),ax.extension.appkit.form.factory.select=(()=>(function(e={}){ax.a;let t=ax.x,a=t.appkit.lib.field,i=t.appkit.form.factory.select.options(e),n=e.name;return e.multiple&&(n=a.collection.name(n)),e.readonly&&i.unshift(ax.a.input({type:"hidden",name:n,value:e.value})),ax.a.select(i,{name:n,"class":e["class"],data:e.data,disabled:e.disabled||e.readonly,id:e.id,multiple:e.multiple,required:e.required,style:e.style,title:e.title,$value:function(){if(this.multiple){let e=[];return this.querySelectorAll("option:checked").forEach(function(t){e.push(t.value)}),e}return this.value},$focus:function(){this.focus()},$disable:function(){this.disabled="disabled"},$enable:function(){e.disabled||this.removeAttribute("disabled")},...e.selectTag})})),ax.extension.appkit.report.factory.one=(e=>(function(t,a,i={}){let n=ax.a;return ax.type.is["function"](a)&&(a=a(ax.extension.appkit.report.factory({data:i.data||e.$data[t],scope:i.scope||e.$scope.concat([t]),layout:i.layout||e.$layout}))),n["appkit-report-field-one"](a)})),ax.extension.appkit.report.factory.many=(e=>(function(t,a,i={}){let n=ax.a;if(ax.type.is["function"](a)){let n=i.data||e.$data[i.key||t]||[],o=i.scope||e.$scope.concat([t,""]),r=i.layout||e.$layout,l=ax.extension.appkit.report.factory({data:n,scope:o,layout:r});l.items=(e=>ax.extension.appkit.report.factory.many.items(e)),l.add=(e=>ax.extension.appkit.report.factory.many.add(e)),a=a(l)}return n["appkit-report-field-many"](a)})),ax.extension.appkit.report.factory.field=(e=>(function(t={},a={}){ax.type.is.string(t)?a.key=t:a=t;let i=ax.a,n=ax.x,o=n.appkit.report.factory.field,r=n.appkit.lib.field.name.assemble(...e.$scope,a.key),l=i["appkit-report-field-body"]([o.caption(a),o.help(a.help),o.output(e)(a),o.hint(a.hint)],a.bodyTag);return!1!==a.dependent&&(l=o.dependent(e)(l,a.dependent)),i["appkit-report-field"](l,{name:r,$match:function(){let e=this.$("appkit-report-field-dependent");return!e||e.$match()},$value:function(){return this.$("appkit-report-field-output > *").$value()},...a.fieldTag})})),ax.extension.appkit.report.factory.fields=(e=>(function(...t){return t.map(function(t){return e.field(t)})})),ax.extension.appkit.report.factory.checkboxes=(e=>(function(t={}){let a=ax.a,i=(ax.x,ax.x.appkit.lib.field),n=i.collection.name(t.name),o=i.collection.value(t.value),r=i.collection.from(t.collection).map(function(a,r){let l=t.check;return ax.type.is["function"](l)&&(l=l(a,r)),e.check({name:n,value:i.collection.includes(o,a.value)?a.value:"",checked:a.value,label:a.label,...l})});r.unshift(a.span({name:n,$value:function(){return t.value}}));let l={$value:function(){return t.value},...t.tag};return a["appkit-report-checkboxes"](r,l)})),ax.extension.appkit.report.factory.check=(()=>(function(e={}){let t=e.checked||"on",a=ax.a.input({name:e.name,value:t,checked:e.value==t,"class":e["class"],data:e.data,disabled:!0,id:e.id,readonly:e.readonly,required:e.required,style:e.style,title:e.title,type:e.type||"checkbox",$value:function(){return this.checked?this.value:""},...e.inputTag});if(e.label){let t={$value:function(){return this.$("input").$value()},...e.labelTag},i=[a,e.label];return e.reverse&&i.reverse(),ax.a.label(i,t)}return a})),ax.extension.appkit.report.factory.link=(()=>(function(e={}){let t=ax.a;return t["appkit-report-link"](t.a(e.label||e.value,{href:e.value,...e.aTag}),{name:e.name,"class":e["class"],data:e.data,id:e.id,style:e.style,title:e.title,$value:function(){return e.value},...e.tag})})),ax.extension.appkit.report.factory.text=(()=>(function(e={}){let t=ax.a,a=ax.x,i=e.value;if(i&&e.type){let t=ax.type.is["function"](e.type)?e.type:a.appkit.lib.text.capitalize(e.type);i=new window[t](i),i=e.stringify?ax.type.is.string(e.stringify)?i[e.stringify]():i[e.stringify.method||"toString"](...e.stringify.arguments||[]):i.toString()}return t["appkit-report-text"]({name:e.name,"class":e["class"],data:e.data,id:e.id,placeholder:e.placeholder,style:e.style,title:e.title,$value:function(){return i},...i?{$text:i}:{$nodes:t["appkit-report-placeholder"](e.placeholder)},...e.textTag})})),ax.extension.appkit.report.factory.object=(()=>(function(e={}){let t=ax.a,a=ax.x;return t["appkit-report-object"]({name:e.name,"class":e["class"],data:e.data,id:e.id,placeholder:e.placeholder,style:e.style,title:e.title,$value:function(){return value},$nodes:a.appkit.put(e.value),...e.objectTag})})),ax.extension.appkit.report.factory.list=(()=>(function(e={}){let t,a=ax.a,i=(ax.x,ax.x.appkit.lib.field),n=i.collection.name(e.name),o=i.collection.value(e.value),r=e.type||"ul";t=e.item?e.item:e=>a.li(e,l(e));let l=e.liTag;return ax.type.is["function"](l)||(l=(()=>l)),a["appkit-report-list"](a[r]({name:n,"class":e["class"],data:e.data,id:e.id,placeholder:e.placeholder,style:e.style,title:e.title,$value:function(){return o},$nodes:o.map(t),...e.textTag}))})),ax.extension.appkit.report.factory.radios=(e=>(function(t={}){let a=ax.a,i=(ax.x,ax.x.appkit.lib.field.collection.from(t.collection).map(function(a,i){let n=t.check;return ax.type.is["function"](n)&&(n=n(checkbox,i)),e.check({name:t.name,type:"radio",value:t.value===a.value?a.value:"",checked:a.value,label:a.label,inputTag:{$value:function(){return this.$("^appkit-report-radios").$value()}},...n})})),n={$value:function(){let e=this.$("input:checked");return e?e.value:""},...t.radiosTag};return a["appkit-report-radios"](i,n)})),ax.extension.appkit.report.factory.media=(()=>(function(e={}){let t,a=ax.a,i=e.value,n=e.type||"img";return t=i?"video"===n||"audio"===n?{$nodes:a.source({src:i})}:{src:i}:{$nodes:a["appkit-report-placeholder"](e.placeholder)},a["appkit-report-media"](a[n]({name:e.name,"class":e["class"],data:e.data,id:e.id,placeholder:e.placeholder,style:e.style,title:e.title,$value:function(){return i},...!1===e.controls?{}:{controls:"controls"},...t,...e[n+"Tag"]},e.tag))})),ax.extension.appkit.document.stylesheet.proxy.shim={get:(e,t)=>(function(a,i={}){return e(a,{scope:t,...i})})},ax.extension.appkit.document.stylesheet.proxy["function"]=function(e,t={}){ax.a;let a=ax.x;a.appkit.document.insert("head","style",a.appkit.lib.style(e,t.scope),{styleTag:t.styleTag})},ax.extension.appkit.lib.field.collection.value=function(e){return ax.type.is.array(e)?e:e?[e]:[]},ax.extension.appkit.lib.field.collection.name=function(e){return e&&"[]"!=e.slice(-2)&&(e+="[]"),e},ax.extension.appkit.lib.field.collection.from=function(e){return e?ax.type.is.array(e)?e.map(function(e){return ax.type.is.array(e)?{value:e[0],label:e[1]}:ax.type.is.object(e)?e:{value:e,label:ax.x.appkit.lib.text.labelize(e.toString())}}):Object.keys(e).map(function(t){return{value:t,label:e[t]}}):[]},ax.extension.appkit.lib.field.collection.includes=function(e,t){return t!==undefined&&null!==t||(t=""),e.some(function(e){return e.toString()===t.toString()})},ax.extension.appkit.lib.field.name.dismantle=function(e){return e.split("[").map(function(e){return"]"===e.slice(-1)?e.slice(0,e.length-1):e})},ax.extension.appkit.lib.field.name.assemble=function(...e){let t=e.shift();return e.length?t+"["+e.join("][")+"]":t},ax.extension.appkit.lib.style.rules.rule=function(e,t){var a="";return Object.keys(e).forEach(function(t){if(!ax.type.is.object(e[t])){var i=(t[0].match(/[A-Z]/)?"-":"")+t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase();a+="\t"+i+": "+e[t]+";\n"}}),""===a?a:t.join(" ").replace(/\s*&\s*/g,"")+" {\n"+a+"\n}\n"},ax.extension.appkit.lib.form.data.object=function(e){let t=ax.extension.appkit.lib,a={},i=new FormData(e);for(let e of i.entries()){let i=e[0],n=e[1],o=t.field.name.dismantle(i);t.object.assign(a,o,n)}return a},ax.extension.appkit.lib.date.now.value=function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},ax.extension.appkit.lib.animate.fade.out=function(e,t={}){"none"!==e.style.display&&this.toggle(e,t)},ax.extension.appkit.lib.animate.fade["in"]=function(e,t={}){"none"===e.style.display&&this.toggle(e,t)},ax.extension.appkit.lib.animate.fade.toggle=function(e,t={}){let a;"none"===e.style.display?(a=!1,e.style.opacity=0,e.style.display="block"):(a=!0,e.style.opacity=1);let i=+new Date,n=t.time||250,o=function(){e.style.opacity=+e.style.opacity+(a?-1:1)*(new Date-i)/n,i=+new Date,(a?+e.style.opacity>0:+e.style.opacity<1)?window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16):(a&&(e.style.display="none"),t.complete&&t.complete())};o()},ax.extension.appkit.form.factory.many.items=(e=>(function(t,a={}){let i=ax.a;ax.x;if(ax.type.is["function"](t)){let n=a.data||e.$data,o=a.scope||e.$scope,r=a.layout||e.$layout,l=t;return t=n.map(function(e,a){let n=ax.extension.appkit.form.factory({data:e,scope:o,layout:r});return n.remove=(e=>ax.extension.appkit.form.factory.many.remove(e)),i["appkit-form-field-many-item"](t(n,a))}),i["appkit-form-field-many-items"](t,{$add:function(e){let t=a["new"]&&a["new"]()||{},n=ax.extension.appkit.form.factory({data:t,scope:o,layout:r});n.remove=(e=>ax.extension.appkit.form.factory.many.remove(e));let s=i["appkit-form-field-many-item"](l(n,null));this[e.insert||"append"](s)}})}return i["appkit-form-field-items"](t)})),ax.extension.appkit.form.factory.many.add=(()=>(function(e,t={}){ax.a;return ax.x.appkit.button(e||"\u2795 Add",function(){this.$("^appkit-form-field-many appkit-form-field-many-items").$add(t)})})),ax.extension.appkit.form.factory.many.remove=(()=>(function(e){ax.a;return ax.x.appkit.button(e||"\u2796 Remove",function(){confirm("Are you sure that you want to remove this item?")&&this.$("^appkit-form-field-many-item").remove()})})),ax.extension.appkit.form.factory.field.input=(e=>(function(t){let a=ax.a,i=(ax.x,t.as||"input"),n=e.$data&&e.$data[t.key]||t.value;return a["appkit-form-field-input"](e[i]({name:t.name,value:n,type:t.type,collection:t.collection,autocomplete:t.autocomplete,disabled:t.disabled,multiple:t.multiple,placeholder:t.placeholder,readonly:t.readonly,required:t.required,style:t.style,title:t.title,...t[i]}))})),ax.extension.appkit.form.factory.field.dependent=(e=>(function(t,a={}){let i=ax.a,n=ax.x,o=n.appkit.form.factory.field.dependent;ax.type.is.string(a)?a={key:a}:!0===a?a={traverse:function(){return n.appkit.lib.field.previous(this)}}:null===a&&(a={});let r={style:"display: none;",$init:function(){this.$process()},$on:{"change: check field dependencies":function(){this.$("^form").$dependencies()}},$dependable:function(){return a.key||a.name||a.selector||a.traverse},$dependency:function(){return o.dependency(e).bind(this)(a)},$match:function(){return o.match.bind(this)(a)},$process:function(){return o.process.bind(this)(a)},...a.dependentTag};return i["appkit-form-field-dependent"](t,r)})),ax.extension.appkit.form.factory.field.help=function(e){let t=ax.a,a=ax.x;return t["appkit-form-field-help-wrapper"](t["appkit-form-field-help"](e,{$toggle:function(){a.appkit.lib.animate.fade.toggle(this)},style:{display:"none"}}))},ax.extension.appkit.form.factory.field.caption=function(e={}){let t;if(e.caption)t=caption;else{let a=this.caption.label(e);t=e.help?[a,this.caption.helpbutton(e)]:a}return ax.a["appkit-form-field-caption"](t,{...e.captionTag})},ax.extension.appkit.form.factory.field.hint=function(e){return ax.a["appkit-form-field-hint"](e)},ax.extension.appkit.form.factory.select.options=function(e){let t=ax.x.appkit.lib,a=t.field.collection.value(e.value),i=t.field.collection.from(e.collection,{value:a});if(i=(i=i.map(function(e){return ax.a.option(e.label,{value:e.value,disabled:e.disabled})})).map(function(e){return e.value&&t.field.collection.includes(a,e.value)&&(e.selected="selected"),e}),e.placeholder||""===e.placeholder){let t={value:"",disabled:e.required,...a?{}:{selected:!0}};i.unshift(ax.a.option(e.placeholder,t))}return i},ax.extension.appkit.report.factory.many.items=(e=>(function(t,a={}){let i=ax.a;ax.x;if(ax.type.is["function"](t)){let n=a.data||e.$data,o=a.scope||e.$scope,r=a.layout||e.$layout,l=t;return t=n.map(function(e,a){let n=ax.extension.appkit.report.factory({data:e,scope:o,layout:r});return n.remove=(e=>ax.extension.appkit.report.factory.many.remove(e)),i["appkit-report-field-many-item"](t(n,a))}),i["appkit-report-field-many-items"](t,{$add:function(e){let t=a["new"]&&a["new"]()||{},n=ax.extension.appkit.report.factory({data:t,scope:o,layout:r});n.remove=(e=>ax.extension.appkit.report.factory.many.remove(e));let s=i["appkit-report-field-many-item"](l(n,null));this[e.insert||"append"](s)}})}return i["appkit-report-field-items"](t)})),ax.extension.appkit.report.factory.many.add=(()=>(function(e,t={}){ax.a;return ax.x.appkit.button(e||"\u2795 Add",function(){this.$("^appkit-report-field-many appkit-report-field-many-items").$add(t)})})),ax.extension.appkit.report.factory.many.remove=(()=>(function(e){ax.a;return ax.x.appkit.button(e||"\u2796 Remove",function(){confirm("Are you sure that you want to remove this item?")&&this.$("^appkit-report-field-many-item").remove()})})),ax.extension.appkit.report.factory.field.dependent=(e=>(function(t,a={}){let i=ax.a,n=ax.x.appkit.report.factory.field.dependent;ax.type.is.string(a)&&(a={key:a});let o={style:"display: none;",$init:function(){this.$process()},$on:{"change: check field dependencies":function(){this.$("^appkit-report").$$("appkit-report-field-dependent").$process()}},$dependable:function(){return a.key||a.name||a.selector||a.traverse},$dependency:function(){return n.dependency(e).bind(this)(a)},$match:function(){return n.match.bind(this)(a)},$process:function(){return n.process.bind(this)(a)},...a.dependentTag};return i["appkit-report-field-dependent"](t,o)})),ax.extension.appkit.report.factory.field.help=function(e){let t=ax.a,a=ax.x;return t["appkit-report-field-help-wrapper"](t["appkit-report-field-help"](e,{$toggle:function(){a.appkit.lib.animate.fade.toggle(this)},style:{display:"none"}}))},ax.extension.appkit.report.factory.field.caption=function(e={}){let t;if(e.caption)t=caption;else{let a=this.caption.label(e);t=e.help?[a,this.caption.helpbutton(e)]:a}return ax.a["appkit-report-field-caption"](t,{...e.captionTag})},ax.extension.appkit.report.factory.field.hint=function(e){return ax.a["appkit-report-field-hint"](e)},
ax.extension.appkit.report.factory.field.output=(e=>(function(t){let a=ax.a,i=(ax.x,t.as||"text"),n=e.$data&&e.$data[t.key]||t.value;return a["appkit-report-field-output"](e[i]({name:t.name,value:n,type:t.type,collection:t.collection,stringify:t.stringify,...t[i]}))})),ax.extension.appkit.document.css=new Proxy(ax.extension.appkit.document.stylesheet.proxy["function"],ax.extension.appkit.document.stylesheet.proxy.shim),ax.extension.appkit.form.factory.field.dependent.process=function(e){let t=ax.x.appkit.lib.animate;this.$match()?e.onmatch&&!e.onmatch(this)||(t.fade["in"](this),this.$("appkit-form-field-input > *").$enable,this.$("appkit-form-field-input > *").$enable()):e.onmismatch&&!e.onmismatch(this)||(t.fade.out(this),this.$("appkit-form-field-input > *").$disable())},ax.extension.appkit.form.factory.field.dependent.dependency=(e=>(function(t){let a,i=ax.x.appkit.lib.field;if(t.traverse)a=t.traverse.bind(this)(this);else{let n;if(t.selector)n=t.selector;else{let a;t.key?a=i.name.assemble(...e.$scope,t.key):t.name?a=t.name:ax["throw"]("Field `options.dependent` needs a `key`, `name`, `selector` or `traverse`."),n=`appkit-form-field[name='${a}']`}let o=t.search||"form";a=this.$(`^${o}`).$(n)}if(a){if("appkit-form-field"!==a.$tag&&(a=a.$("^appkit-form-field")),a)return a;ax["throw"](`Form field failed to find <appkit-form-field> for its dependency using ${JSON.stringify(t)}.`)}else ax["throw"](`Form field failed to select its dependency using ${JSON.stringify(t)}.`)})),ax.extension.appkit.form.factory.field.dependent.match=function(e){if(this.$dependable()){let t=this.$dependency();if(t.$match()){let a=t.$value();return ax.type.is.array(a)&&(a=a.join(" ")),e.value?a==e.value:e.pattern?new RegExp(e.pattern||"").test(a):!!a}return!1}return!0},ax.extension.appkit.form.factory.field.caption.label=function(e){let t=ax.a,a=ax.x.appkit.lib;if(!1===e.label)return;let i=[e.label||a.text.labelize(e.key)],n={$on:{"click: focus on input":function(){this.$("^appkit-form-field-body","appkit-form-field-input > *").$focus()}},...e.labelTag};return t["appkit-form-field-label"](i,n)},ax.extension.appkit.form.factory.field.caption.helpbutton=function(e){let t=ax.a;ax.x;return t["appkit-form-field-helpbutton"]({$state:!1,$nodes:function(){return t["appkit-form-field-arrow"]({$text:this.$state?" ? \u25b4 ":" ? \u25be "})},$on:{"click: toggle help":function(){this.$state=!this.$state,this.$("^appkit-form-field","appkit-form-field-help").$toggle()}},...e.helpbuttonTag})},ax.extension.appkit.report.factory.field.dependent.process=function(e){let t=ax.x.appkit.lib.animate;this.$match()?e.onmatch&&!e.onmatch(this)||t.fade["in"](this):e.onmismatch&&!e.onmismatch(this)||t.fade.out(this)},ax.extension.appkit.report.factory.field.dependent.dependency=(e=>(function(t){let a,i=ax.x.appkit.lib.field;if(t.traverse)field=this.$("^"),a=t.traverse.bind(field)(field);else{let n;if(t.selector)n=t.selector;else{let a;t.key?a=i.name.assemble(...e.$scope,t.key):t.name?a=t.name:ax["throw"]("Field `options.dependent` needs a `key`, `name`, `selector` or `traverse`."),n=`appkit-report-field[name='${a}']`}let o=t.search||"appkit-report";a=this.$(`^${o}`).$(n)}if(a){if("appkit-report-field"!==a.$tag&&(a=a.$("^appkit-report-field")),a)return a;ax["throw"](`Report field failed to find <appkit-report-field> for its dependency using ${JSON.stringify(t)}.`)}else ax["throw"](`Report field failed to select its dependency using ${JSON.stringify(t)}.`)})),ax.extension.appkit.report.factory.field.dependent.match=function(e){if(this.$dependable()){let t=this.$dependency();if(t.$match()){let a=t.$value();return ax.type.is.array(a)&&(a=a.join(" ")),e.value?a==e.value:e.pattern?new RegExp(e.pattern||"").test(a):!!a}return!1}return!0},ax.extension.appkit.report.factory.field.caption.label=function(e){let t=ax.a,a=ax.x.appkit.lib;if(!1===e.label)return;let i=[e.label||a.text.labelize(e.key)];return t["appkit-report-field-label"](i,e.labelTag)},ax.extension.appkit.report.factory.field.caption.helpbutton=function(e){let t=ax.a;ax.x;return t["appkit-report-field-helpbutton"]({$state:!1,$nodes:function(){return t["appkit-report-field-arrow"]({$text:this.$state?" ? \u25b4 ":" ? \u25be "})},$on:{"click: toggle help":function(){this.$state=!this.$state,this.$("^appkit-report-field","appkit-report-field-help").$toggle()}},...e.helpbuttonTag})},ax.extension.appkit.form.factory.password=(e=>(function(t={}){let a=ax.a,i=function(e){e.value?e.style.fontFamily="text-security-disc":e.style.fontFamily="unset"},n=[a["appkit-form-textsecurity-password-input"](e.input({name:t.name,value:t.value,autocomplete:"off",readonly:t.readonly,required:t.required,inputTag:{$on:{"input: secure text":function(){i(this)}},$init:function(){i(this)}},...t.input})),!1===t.confirm?null:a["appkit-form-textsecurity-password-confirmation"](e.input({value:t.value,autocomplete:"off",readonly:t.readonly,required:t.required,inputTag:{$on:{"input: secure text":function(){i(this)}},$init:function(){i(this)}},...t.confirmation}))];return a["appkit-form-textsecurity-password"](n,{$value:function(){return this.$("input").$value()},$disable:function(){this.$("input").$disable()},$enable:function(){this.$("input").$enable()},$focus:function(){this.$("input").focus()},$on:{"input: check validity":function(){if(!1!==t.confirm){let e=this.$("input")(),t=this.$("input").value();t[0]===t[1]?e[1].setCustomValidity(""):e[1].setCustomValidity("Passwords must match.")}}}})})),ax.extension.appkit.form.factory.multiselect=(e=>(function(t={}){let a=ax.a,i=ax.x.appkit.form,n=ax.x.appkit.lib.field;return t.name=n.collection.name(t.name),t.value=n.collection.value(t.value),t.collection=n.collection.from(t.collection),a["appkit-form-multiselect"]([i.factory.multiselect.select(e,t),i.factory.multiselect.selected(e,t)],{$init:function(){this.$preselect()},$value:function(){return this.$("appkit-form-multiselect-selected").$state.map(function(e){return e.value})},$focus:function(){this.$("select").focus()},$disable:function(){this.$$("input").$disable()},$enable:function(){t.disabled||this.$$("input").$enable()},$preselect:function(){var e=[];t.value.map(t=>{for(var a=this.$("select").options,i=0,n=a.length;i<n;i++)a[i].value.toString()===t.toString()&&(e.push({index:i,value:t,label:a[i].text}),a[i].disabled="disabled")}),this.$("appkit-form-multiselect-selected").$state=e},...t.multiselectTag})})),ax.extension.appkit.form.factory.language=(e=>(function(t={}){let a=ax.a,i=ax.x.appkit.form.factory.language;var n=Object.assign({name:t.name,value:t.value,"class":t["class"],data:t.data,disabled:t.disabled,readonly:t.readonly,id:t.id,multiple:t.multiple,placeholder:t.placeholder||"Select language...",required:t.required,style:t.style,title:t.title,collection:i.collection},t.select);return a["appkit-form-language"](e.select(n),{$value:function(){return this.$("select").$value()},$disable:function(){this.$("select").$disable()},$enable:function(){this.$("select").$enable()},$focus:function(){this.$("select").focus()},...t.languageTag})})),ax.extension.appkit.form.factory.country=(e=>(function(t={}){let a=ax.a,i=ax.x.appkit.form.factory.country;var n=Object.assign({name:t.name,value:t.value,"class":t["class"],data:t.data,disabled:t.disabled,readonly:t.readonly,id:t.id,multiple:t.multiple,required:t.required,style:t.style,title:t.title,collection:i.collection},t.select);return a["appkit-form-country"](e.select(n),{$value:function(){return this.$("select").$value()},$disable:function(){this.$("select").$disable()},$enable:function(){this.$("select").$enable()},$focus:function(){this.$("select").focus()},...t.countryTag})})),ax.extension.appkit.form.factory.selectinput=(e=>(function(t={}){let a,i,n=ax.a,o=(ax.x,ax.x.appkit.lib.field.collection.from(t.collection||{0:"Off",1:"On"}));if(o.push({label:"\u2014\u2014\u2014\u2014\u2014",disabled:!0}),o.push({value:"__USE_INPUT__",label:"Enter a value"}),t.value){let e=o.some(e=>e.value==t.value);a=e?t.value:"__USE_INPUT__",i=e?null:t.value}else a=t.placeholder===undefined?"__USE_INPUT__":"";let r={$value:function(){return this.$("appkit-form-selectinput-hiddeninput input").value},$focus:function(){let e=this.$("select");"__USE_INPUT__"===e.value?this.$("appkit-form-selectinput-input input").focus():e.focus()},$disable:function(){this.$("appkit-form-selectinput-hiddeninput input").$disable()},$enable:function(){if(!t.disabled){this.$("appkit-form-selectinput-hiddeninput input").$enable()}},$on:{change:function(){let e=this.$("select"),a=this.$("appkit-form-selectinput-input input"),i=this.$("appkit-form-selectinput-hiddeninput input");"__USE_INPUT__"===e.value?(a.style.display="",i.value=a.value,t.required&&(e.removeAttribute("required"),a.required="required"),e==document.activeElement&&a.focus()):(a.style.display="none",i.value=e.value,t.required&&(a.removeAttribute("required"),e.required="required"))}}};return n["appkit-form-selectinput"]([n["appkit-form-selectinput-hiddeninput"](e.input({name:t.name,value:t.value,type:"hidden",...t.hiddeninput})),n["appkit-form-selectinput-select"](e.select({collection:o,placeholder:t.placeholder,required:t.required,value:a,...t.select})),n["appkit-form-selectinput-input"](e.input({style:i?"":"display: none",value:i,...t.input}))],r)})),ax.extension.appkit.form.factory.timezone=(e=>(function(t={}){let a=ax.a,i=(ax.x,ax.extension.appkit.form.factory.timezone);var n=Object.assign({name:t.name,value:t.value,"class":t["class"],data:t.data,disabled:t.disabled,readonly:t.readonly,id:t.id,multiple:t.multiple,required:t.required,style:t.style,title:t.title,collection:i.collection},t.select);return a["appkit-form-timezone"](e.select(n),{$value:function(){return this.$("select").$value()},$disable:function(){this.$("select").$disable()},$enable:function(){this.$("select").$enable()},$focus:function(){this.$("select").focus()},...t.timezoneTag})})),ax.extension.appkit.form.factory.country.collection={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, The Democratic Republic of The",CK:"Cook Islands",CR:"Costa Rica",CI:"C\xd4te D'ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and Mcdonald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, The Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PR:"Puerto Rico",QA:"Qatar",RE:"R\xc9union",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and The Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",CS:"Serbia and Montenegro",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and The South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan, Province of China",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},ax.extension.appkit.document.css["appkit-form-textsecurity-password"]({display:"inline-block",verticalAlign:"top",">*":{display:"block"},input:{fontSize:"1.1em",lineHeight:"1em",padding:"0.5px",verticalAlign:"top"}}),ax.extension.appkit.document.css["appkit-form-multiselect"]({display:"inline-block",verticalAlign:"top","appkit-form-multiselect-selected":{display:"block",padding:"5px",border:"1px solid #b3b3b3",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"},"appkit-form-multiselect-selected-item":{display:"block",overflow:"auto"},"appkit-form-multiselect-selected-item-label":{verticalAlign:"baseline"},"appkit-form-multiselect-selected-item-remove":{display:"inline-block",padding:"0.125em",float:"right",cursor:"pointer",fontSize:"0.75em",color:"#666"}}),ax.extension.appkit.form.factory.multiselect.selected=function(e,t={}){let a=ax.a;return a["appkit-form-multiselect-selected"]({$state:[],$remove:function(e){state=this.$state;var t=state.indexOf(e);state.splice(t,1),-1!==t&&(this.$state=state)},$add:function(e){this.$state=[e].concat(this.$state)},$update:function(){0===this.$state.length?(this.style.display="none",this.$("^appkit-form-multiselect-selected").previousSibling.required=t.required,this.$nodes=[e.input({name:t.name,disabled:!0,inputTag:{type:"hidden"}})]):(this.style.display="",this.$("^appkit-form-multiselect-selected").previousSibling.removeAttribute("required"),this.$nodes=this.$state.map(function(i){return a["appkit-form-multiselect-selected-item"]([a["appkit-form-multiselect-selected-item-label"](i.label),a["appkit-form-multiselect-selected-item-remove"]("\ud83d\uddd9",{$on:{"click: remove item from selection":function(){this.$("^appkit-form-multiselect").$("select").$enableDeselected(i.index),this.$("^appkit-form-multiselect-selected").$remove(i)}}}),e.input({name:t.name,required:t.required,value:i.value,inputTag:{type:"hidden"}})])}))}})},ax.extension.appkit.form.factory.multiselect.select=function(e,t={}){ax.a;return e.select({placeholder:t.placeholder||"Add to selection",collection:t.collection,selectTag:{$on:{"change: add item to selection":function(){this.nextSibling.$add({index:this.selectedIndex,value:this.value,label:this.options[this.selectedIndex].text}),this.$disableSelected()}},$disableSelected:function(){this.options[this.selectedIndex].disabled="disabled",this.selectedIndex=0,this.$checkForEnabledOptions()},$enableDeselected:function(e){this.options[e].removeAttribute("disabled"),this.$checkForEnabledOptions()},$checkForEnabledOptions:function(){for(var e,t=0,a=this.options.length;t<a;t++)t>0&&!this.options[t].disabled&&(e=!0);e?this.removeAttribute("disabled"):this.disabled="disabled"}}})},ax.extension.appkit.document.css["appkit-form-selectinput"]({display:"inline-block",verticalAlign:"top","appkit-form-selectinput-select":{display:"block",select:{width:"100%"}},"appkit-form-selectinput-input":{display:"block",input:{width:"100%"}}}),ax.extension.appkit.form.factory.language.collection={ab:"Abkhazian",aa:"Afar",af:"Afrikaans",sq:"Albanian",am:"Amharic",ar:"Arabic",hy:"Armenian",as:"Assamese",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",eu:"Basque",bn:"Bengali (Bangla)",dz:"Bhutani",bh:"Bihari",bi:"Bislama",br:"Breton",bg:"Bulgarian",my:"Burmese",be:"Byelorussian (Belarusian)",km:"Cambodian",ca:"Catalan","zh-Hans":"Chinese (Simplified)","zh-Hant":"Chinese (Traditional)",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fa:"Farsi",fj:"Fiji",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",gd:"Gaelic (Scottish)",gv:"Gaelic (Manx)",ka:"Georgian",de:"German",el:"Greek",kl:"Greenlandic",gn:"Guarani",gu:"Gujarati",ha:"Hausa",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ia:"Interlingua",ie:"Interlingue",iu:"Inuktitut",ik:"Inupiak",ga:"Irish",it:"Italian",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",rw:"Kinyarwanda (Ruanda)",ky:"Kirghiz",rn:"Kirundi (Rundi)",ko:"Korean",ku:"Kurdish",lo:"Laothian",la:"Latin",lv:"Latvian (Lettish)",li:"Limburgish ( Limburger)",ln:"Lingala",lt:"Lithuanian",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",mn:"Mongolian",na:"Nauru",ne:"Nepali",no:"Norwegian",oc:"Occitan",or:"Oriya",om:"Oromo (Afan, Galla)",ps:"Pashto (Pushto)",pl:"Polish",pt:"Portuguese",pa:"Punjabi",qu:"Quechua",rm:"Rhaeto-Romance",ro:"Romanian",ru:"Russian",sm:"Samoan",sg:"Sangro",sa:"Sanskrit",sr:"Serbian",sh:"Serbo-Croatian",st:"Sesotho",tn:"Setswana",sn:"Shona",sd:"Sindhi",si:"Sinhalese",ss:"Siswati",sk:"Slovak",sl:"Slovenian",so:"Somali",es:"Spanish",su:"Sundanese",sw:"Swahili (Kiswahili)",sv:"Swedish",tl:"Tagalog",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga",ts:"Tsonga",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",vi:"Vietnamese",vo:"Volap\xfck",cy:"Welsh",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"},ax.extension.appkit.form.factory.timezone.collection={"Pacific/Pago_Pago":"(GMT-11:00) American Samoa","Pacific/Midway":"(GMT-11:00) Midway Island","Pacific/Honolulu":"(GMT-10:00) Hawaii","America/Juneau":"(GMT-09:00) Alaska","America/New_York":"(GMT-05:00) Eastern Time (US & Canada)","America/Tijuana":"(GMT-08:00) Tijuana","America/Phoenix":"(GMT-07:00) Arizona","America/Chihuahua":"(GMT-07:00) Chihuahua","America/Mazatlan":"(GMT-07:00) Mazatlan","America/Guatemala":"(GMT-06:00) Central America","America/Mexico_City":"(GMT-06:00) Mexico City","America/Monterrey":"(GMT-06:00) Monterrey","America/Regina":"(GMT-06:00) Saskatchewan","America/Bogota":"(GMT-05:00) Bogota","America/Indiana/Indianapolis":"(GMT-05:00) Indiana (East)","America/Lima":"(GMT-05:00) Quito","America/Halifax":"(GMT-04:00) Atlantic Time (Canada)","America/Caracas":"(GMT-04:00) Caracas","America/Guyana":"(GMT-04:00) Georgetown","America/La_Paz":"(GMT-04:00) La Paz","America/Santiago":"(GMT-04:00) Santiago","America/St_Johns":"(GMT-03:30) Newfoundland","America/Sao_Paulo":"(GMT-03:00) Brasilia","America/Argentina/Buenos_Aires":"(GMT-03:00) Buenos Aires","America/Godthab":"(GMT-03:00) Greenland","America/Montevideo":"(GMT-03:00) Montevideo","Atlantic/South_Georgia":"(GMT-02:00) Mid-Atlantic","Atlantic/Azores":"(GMT-01:00) Azores","Atlantic/Cape_Verde":"(GMT-01:00) Cape Verde Is.","Africa/Casablanca":"(GMT+00:00) Casablanca","Europe/Dublin":"(GMT+00:00) Dublin","Europe/London":"(GMT+00:00) London","Europe/Lisbon":"(GMT+00:00) Lisbon","Africa/Monrovia":"(GMT+00:00) Monrovia","Etc/UTC":"(GMT+00:00) UTC","Europe/Amsterdam":"(GMT+01:00) Amsterdam","Europe/Belgrade":"(GMT+01:00) Belgrade","Europe/Berlin":"(GMT+01:00) Berlin","Europe/Zurich":"(GMT+01:00) Zurich","Europe/Bratislava":"(GMT+01:00) Bratislava","Europe/Brussels":"(GMT+01:00) Brussels","Europe/Budapest":"(GMT+01:00) Budapest","Europe/Copenhagen":"(GMT+01:00) Copenhagen","Europe/Ljubljana":"(GMT+01:00) Ljubljana","Europe/Madrid":"(GMT+01:00) Madrid","Europe/Paris":"(GMT+01:00) Paris","Europe/Prague":"(GMT+01:00) Prague","Europe/Rome":"(GMT+01:00) Rome","Europe/Sarajevo":"(GMT+01:00) Sarajevo","Europe/Skopje":"(GMT+01:00) Skopje","Europe/Stockholm":"(GMT+01:00) Stockholm","Europe/Vienna":"(GMT+01:00) Vienna","Europe/Warsaw":"(GMT+01:00) Warsaw","Africa/Algiers":"(GMT+01:00) West Central Africa","Europe/Zagreb":"(GMT+01:00) Zagreb","Europe/Athens":"(GMT+02:00) Athens","Europe/Bucharest":"(GMT+02:00) Bucharest","Africa/Cairo":"(GMT+02:00) Cairo","Africa/Harare":"(GMT+02:00) Harare","Europe/Helsinki":"(GMT+02:00) Helsinki","Asia/Jerusalem":"(GMT+02:00) Jerusalem","Europe/Kaliningrad":"(GMT+02:00) Kaliningrad","Europe/Kiev":"(GMT+02:00) Kyiv","Africa/Johannesburg":"(GMT+02:00) Pretoria","Europe/Riga":"(GMT+02:00) Riga","Europe/Sofia":"(GMT+02:00) Sofia","Europe/Tallinn":"(GMT+02:00) Tallinn","Europe/Vilnius":"(GMT+02:00) Vilnius","Asia/Baghdad":"(GMT+03:00) Baghdad","Europe/Istanbul":"(GMT+03:00) Istanbul","Asia/Kuwait":"(GMT+03:00) Kuwait","Europe/Minsk":"(GMT+03:00) Minsk","Europe/Moscow":"(GMT+03:00) St. Petersburg","Africa/Nairobi":"(GMT+03:00) Nairobi","Asia/Riyadh":"(GMT+03:00) Riyadh","Europe/Volgograd":"(GMT+03:00) Volgograd","Asia/Tehran":"(GMT+03:30) Tehran","Asia/Muscat":"(GMT+04:00) Muscat","Asia/Baku":"(GMT+04:00) Baku","Europe/Samara":"(GMT+04:00) Samara","Asia/Tbilisi":"(GMT+04:00) Tbilisi","Asia/Yerevan":"(GMT+04:00) Yerevan","Asia/Kabul":"(GMT+04:30) Kabul","Asia/Yekaterinburg":"(GMT+05:00) Ekaterinburg","Asia/Karachi":"(GMT+05:00) Karachi","Asia/Tashkent":"(GMT+05:00) Tashkent","Asia/Kolkata":"(GMT+05:30) New Delhi","Asia/Colombo":"(GMT+05:30) Sri Jayawardenepura","Asia/Kathmandu":"(GMT+05:45) Kathmandu","Asia/Almaty":"(GMT+06:00) Almaty","Asia/Dhaka":"(GMT+06:00) Dhaka","Asia/Urumqi":"(GMT+06:00) Urumqi","Asia/Rangoon":"(GMT+06:30) Rangoon","Asia/Bangkok":"(GMT+07:00) Hanoi","Asia/Jakarta":"(GMT+07:00) Jakarta","Asia/Krasnoyarsk":"(GMT+07:00) Krasnoyarsk","Asia/Novosibirsk":"(GMT+07:00) Novosibirsk","Asia/Shanghai":"(GMT+08:00) Beijing","Asia/Chongqing":"(GMT+08:00) Chongqing","Asia/Hong_Kong":"(GMT+08:00) Hong Kong","Asia/Irkutsk":"(GMT+08:00) Irkutsk","Asia/Kuala_Lumpur":"(GMT+08:00) Kuala Lumpur","Australia/Perth":"(GMT+08:00) Perth","Asia/Singapore":"(GMT+08:00) Singapore","Asia/Taipei":"(GMT+08:00) Taipei","Asia/Ulaanbaatar":"(GMT+08:00) Ulaanbaatar","Asia/Tokyo":"(GMT+09:00) Tokyo","Asia/Seoul":"(GMT+09:00) Seoul","Asia/Yakutsk":"(GMT+09:00) Yakutsk","Australia/Adelaide":"(GMT+09:30) Adelaide","Australia/Darwin":"(GMT+09:30) Darwin","Australia/Brisbane":"(GMT+10:00) Brisbane","Australia/Melbourne":"(GMT+10:00) Melbourne","Pacific/Guam":"(GMT+10:00) Guam","Australia/Hobart":"(GMT+10:00) Hobart","Pacific/Port_Moresby":"(GMT+10:00) Port Moresby","Australia/Sydney":"(GMT+10:00) Sydney","Asia/Vladivostok":"(GMT+10:00) Vladivostok","Asia/Magadan":"(GMT+11:00) Magadan","Pacific/Noumea":"(GMT+11:00) New Caledonia","Pacific/Guadalcanal":"(GMT+11:00) Solomon Is.","Asia/Srednekolymsk":"(GMT+11:00) Srednekolymsk","Pacific/Auckland":"(GMT+12:00) Wellington","Pacific/Fiji":"(GMT+12:00) Fiji","Asia/Kamchatka":"(GMT+12:00) Kamchatka","Pacific/Majuro":"(GMT+12:00) Marshall Is.","Pacific/Chatham":"(GMT+12:45) Chatham Is.","Pacific/Tongatapu":"(GMT+13:00) Nuku'alofa","Pacific/Apia":"(GMT+13:00) Samoa","Pacific/Fakaofo":"(GMT+13:00) Tokelau Is."},ax.extension.appkit.document.css({"*":{boxSizing:"border-box"},"appkit-form-field-help-wrapper":{display:"inline-block"},"appkit-form-field-helpbutton":{cursor:"pointer"}}),ax.extension.codemirror={},ax.extension.codemirror.form={},ax.extension.codemirror.form.code=function(e,t={}){let a=ax.a,i=ax.x.codemirror.form;return a["appkit-form-codemirror-code"]([i.code.toolbar(e,t),i.code.editor(e,t)],{$setMode:function(){this.$("textarea").$codemirror.setOption("mode",this.$("appkit-form-codemirror-code-mode").$value())},$value:function(){return this.$("textarea").$codemirror.getValue()},$focus:function(){this.$("textarea").$codemirror.focus()},$disable:function(){this.$("textarea").$disable()},$enable:function(){this.$("appkit-form-codemirror-code-editor textarea").$refresh(),t.disabled||this.$("textarea").$enable()}})},ax.extension.codemirror.form.code.editor=function(e,t={}){return ax.a["appkit-form-codemirror-code-editor"](e.textarea({name:t.name,value:t.value,textareaTag:{style:"display: none",$init:function(){this.$setup()},$refresh:function(){setTimeout(function(){this.$codemirror.refresh()}.bind(this),1)},$setup:function(){this.$codemirror=CodeMirror.fromTextArea(this,{lineNumbers:!0,placeholder:t.placeholder}),this.$codemirror.on("change",function(e){e.getTextArea().$setRequired()}),this.$("^appkit-form-codemirror-code").$setMode(),this.$codemirror.setSize("100%","100%"),this.$setRequired(),this.$refresh(),this.$codemirror.on("keyup",function(e){e.getTextArea().$setRequired()})},$setRequired:function(){let e=this.$codemirror.getValue(),a=this.closest("appkit-form-codemirror-code-editor").querySelector(".CodeMirror textarea");!e&&t.required?a.required=!0:a.required=!1}}}),{$on:{"keydown: ESC to exit":function(e){let t=this.$("^appkit-form-codemirror-code");27==e.keyCode&&(t.classList.contains("fullscreen")?t.$("appkit-form-codemirror-code-fullscreen button").click():e.shiftKey?ax.x.appkit.lib.tabable.previous(this).focus():ax.x.appkit.lib.tabable.next(this).focus())}}})},ax.extension.appkit.document.css["appkit-form-codemirror-code"]({display:"block",border:"1px solid #b3b3b3","appkit-form-codemirror-code-toolbar":{display:"block",overflow:"auto",backgroundColor:"white",borderBottom:"1px solid #e6e6e6",button:{fontSize:"1.2em",border:"none",backgroundColor:"transparent",cursor:"pointer"},select:{padding:"2px",border:"none",backgroundColor:"transparent"}},"appkit-form-codemirror-code-mode select":{padding:"4px"},"appkit-form-codemirror-code-toolbar-right":{float:"right"},"&.fullscreen":{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",border:"none",borderRadius:"0px",zIndex:"999"},"appkit-form-codemirror-code-editor":{"div.CodeMirror":{minHeight:"2em",border:"unset",borderRadius:"unset",padding:"unset",fontFamily:"monospace",zIndex:"1","div.CodeMirror-scroll":{minHeight:"unset"}}}}),ax.extension.codemirror.form.code.mode=function(e,t={}){let a,i,n=ax.a;if(ax.type.is.string(t))a=n.label(t),i=(()=>t);else if(ax.type.is.object(t)){let n=t.collection;n===undefined&&((n=Object.keys(CodeMirror.modes)).shift(),n=n.map(e=>[e,e])),a=e.select({placeholder:"\u2328",collection:n,selectTag:{$on:{"change: set CodeMirror mode":function(){this.$("^appkit-form-codemirror-code").$setMode()}}},...t}),i=function(){return this.$("select").$value()}}else a=null,i=(()=>"");return n["appkit-form-codemirror-code-mode"](a,{$value:i})},ax.extension.codemirror.form.code.toolbar=function(e,t={}){let a=ax.a;return a["appkit-form-codemirror-code-toolbar"]([a["appkit-form-codemirror-code-toolbar-right"](a["appkit-form-codemirror-code-fullscreen"](a.button({$text:"\ud83d\uddd6"},{type:"button",$on:{"click: toggle full screen":function(){let e=this.$("^appkit-form-codemirror-code"),t=e.$("appkit-form-codemirror-code-editor"),a=t.$("textarea").$codemirror;e.classList.contains("fullscreen")?(this.$text="\ud83d\uddd6",e.classList.remove("fullscreen"),t.style.height="",a.focus()):(this.$text="\ud83d\uddd7",e.classList.add("fullscreen"),a.focus())}}}))),this.mode(e,t.mode)])},ax.extension.appkit.form.factory.code=(e=>(function(t={}){return ax.x.codemirror.form.code(e,t)})),ax.extension.markedjs={},ax.extension.md=function(){return ax.extension.markedjs.markdown(...arguments)},ax.extension.markedjs.markdown=function(e,t={}){let a=ax.a;return ax.type.is["function"](e)&&(e=e()),t.inline?html=marked.inlineLexer(e,[]):html=marked(e),a["axf-markedjs-markdown"]({$html:html,...t.markdownTag})},ax.extension.simplemde={},ax.extension.simplemde.form={},ax.extension.simplemde.form.markdown=function(e,t){let a=ax.a,i=[{name:"bold",action:SimpleMDE.toggleBold,className:"fa fa-bold",title:"Bold"},{name:"italic",action:SimpleMDE.toggleItalic,className:"fa fa-italic",title:"Italic"},{name:"heading",action:SimpleMDE.toggleHeadingSmaller,className:"fa fa-header",title:"Heading"},"|",{name:"quote",action:SimpleMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Quote"},{name:"unordered-list",action:SimpleMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Generic List"},{name:"ordered-list",action:SimpleMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Numbered List"},"|",{name:"link",action:SimpleMDE.drawLink,className:"fa fa-link",title:"Create Link"},{name:"image",action:SimpleMDE.drawImage,className:"fa fa-picture-o",title:"Insert Image"},{name:"table",action:SimpleMDE.drawTable,className:"fa fa-table",title:"Insert Table"},"|",{name:"preview",action:SimpleMDE.togglePreview,className:"fa fa-eye no-disable",title:"Toggle Preview"},{name:"side-by-side",action:SimpleMDE.toggleSideBySide,className:"fa fa-columns no-disable",title:"Toggle Side by Side"},{name:"fullscreen",action:SimpleMDE.toggleFullScreen,className:"fa fa-arrows-alt no-disable",title:"Toggle Fullscreen"}];return a["appkit-form-simplemde-markdown"](e.textarea({name:t.name,value:t.value,...t.textareaTag}),{$init:function(){this.$setup()},$setup:function(){this.$simplemde=new SimpleMDE({element:this.$("textarea"),toolbar:i,placeholder:t.placeholder,autoDownloadFontAwesome:!1}),(e=>{let a=this.closest("appkit-form-simplemde-markdown").querySelector(".CodeMirror textarea");t.required&&!e?a.required=t.required:a.removeAttribute("required")})(t.value),this.$refresh()},$refresh:function(){setTimeout(function(){this.$simplemde.codemirror.refresh()}.bind(this),1)},$value:function(){return this.$simplemde?this.$simplemde.value():t.value},$disable:function(){this.$("textarea").$disable()},$enable:function(){this.$refresh(),this.$("textarea").$enable()},$focus:function(){this.$simplemde.codemirror.focus()},$on:{"keydown: ESC to exit":function(e){if(27==e.keyCode){if(this.$("div.CodeMirror").classList.contains("CodeMirror-fullscreen"))return this.$simplemde.codemirror.focus(),!0;e.shiftKey?ax.x.appkit.lib.tabable.previous(this).focus():ax.x.appkit.lib.tabable.next(this).focus()}}},...t.markdownTag})},ax.extension.appkit.form.factory.markdown=(()=>(function(e={}){return ax.extension.simplemde.form.markdown(this,e)})),ax.extension.appkit.document.css["appkit-form-simplemde-markdown"]({".CodeMirror":{borderColor:"#b3b3b3",borderTop:"1px solid #ccc",borderBottomLeftRadius:0,borderBottomRightRadius:0,minHeight:"unset"},".CodeMirror-scroll":{minHeight:"unset"},".editor-toolbar":{border:"1px solid #b3b3b3",borderBottom:"none",borderTopLeftRadius:0,borderTopRightRadius:0,opacity:1}}),ax.extension.quilljs={},ax.extension.quilljs.form={},ax.extension.quilljs.form.richedit=function(e,t){let a=ax.a;ax.x;return a["appkit-form-quilljs-markdown"]([a["appkit-form-quilljs-markdown-container"],a["appkit-form-quilljs-markdown-textarea"](a.textarea({name:t.name,value:t.value,disabled:t.disabled,required:t.required}))],{$value:function(){let e=this.$quill?this.$quill.getText():t.value;return"\n"===e&&(e=""),e},$init:function(){let e=this.$("appkit-form-quilljs-markdown-container");this.$quill=new Quill(e,{modules:{toolbar:[["bold","italic"],["link","blockquote","code-block","image"],[{list:"ordered"},{list:"bullet"}]]},theme:t.theme||"snow",placeholder:t.placeholder,readOnly:t.readonly,...t.quill}),this.$quill.on("text-change",()=>{this.$update()})},$disable:function(){this.$quill.disable()},$enable:function(){t.disabled||this.$quill.enable()},$focus:function(){this.$quill.focus()},$on:{"keyup: check field depenencies":function(){let e=this.$("^form");e&&e.$dependencies()},"keyup: ESC to exit":function(e){27==e.keyCode&&ax.x.appkit.lib.field.next(this).$focus()}},$update:function(){
let e=JSON.stringify(this.$quill.getContents());this.$("appkit-form-quilljs-markdown-textarea textarea").value=e},...t.quilljsTag})},ax.extension.appkit.form.factory.richedit=(()=>(function(e={}){return ax.extension.quilljs.form.richedit(this,e)})),ax.extension.appkit.document.css["appkit-form-quilljs-markdown"]({position:"relative",border:"1px solid #b3b3b3",backgroundColor:"white",display:"block","appkit-form-quilljs-markdown-textarea":{position:"absolute",top:"0",zIndex:"-1"},".ql-container.ql-snow":{border:"none"},".ql-toolbar.ql-snow":{borderTop:"none",borderLeft:"none",borderRight:"none"},".ql-editor.ql-blank":{position:"relative"}});